<script>
  new p5(p => {
    let cam;
    let camReady = false;

    p.setup = () => {
      p.createCanvas(window.innerWidth, window.innerHeight).parent("p5-holder");
      cam = p.createCapture(p.VIDEO, stream => {
        console.log("📷 鏡頭啟動成功");
        camReady = true;
      });
      cam.size(p.width, p.height);
      cam.hide();
    };

    p.draw = () => {
      p.background(0);
      if (camReady) {
        p.image(cam, 0, 0, p.width, p.height);
      } else {
        p.fill(255);
        p.textAlign(p.CENTER, p.CENTER);
        p.text("正在啟動鏡頭...", p.width / 2, p.height / 2);
      }
    };

    p.windowResized = () => {
      p.resizeCanvas(window.innerWidth, window.innerHeight);
    };
  });
</script>
